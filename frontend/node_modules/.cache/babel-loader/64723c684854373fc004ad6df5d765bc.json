{"ast":null,"code":"var _jsxFileName = \"/Users/asantamariammathew/Desktop/online-auction-system-frontend-main/src/components/Board.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Navigate } from 'react-router-dom';\nimport openSocket from 'socket.io-client';\n// MUI\nimport { Button, Box, ButtonGroup } from '@mui/material';\n// Styling\nimport './css/board.css';\nimport './css/card.css';\nimport { adAreaStyle, boardCardStyle, boardStyle, paginationStyle } from './css/boardStyle';\n// Actions\nimport { loadAds, adPostedByOther, updateAdInList } from '../actions/ad';\nimport { setAlert, clearAlerts } from '../actions/alert';\n// Components\nimport Spinner from './Spinner';\nimport Card from './Card';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Board = props => {\n  _s();\n  const [pageNumber, setPageNumber] = useState(1);\n  const [adPerPage] = useState(6);\n  useEffect(() => {\n    if (props.passedUser) {\n      props.loadAds(props.passedUser);\n    } else {\n      props.loadAds();\n      const socket = openSocket(process.env.REACT_APP_API_BASE_URL);\n      // when new ad is added\n      socket.on('addAd', data => {\n        console.log(data);\n        if (props.user && data.ad.owner && data.ad.owner.toString() !== props.user._id.toString()) {\n          props.clearAlerts();\n          props.setAlert('New ads available', 'info', 60000);\n        }\n      });\n      // when auction starts/ends\n      socket.on('auctionStarted', res => {\n        props.updateAdInList(res.data);\n      });\n      socket.on('auctionEnded', res => {\n        props.updateAdInList(res.data);\n      });\n\n      // disconnect socket when page left\n      return () => {\n        socket.emit('leaveHome');\n        socket.off();\n        props.clearAlerts();\n      };\n    }\n  }, []);\n\n  // Check if user is logged\n  if (!props.isAuth) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Pagination\n  let lastAdIndex = pageNumber * adPerPage;\n  let firstAdIndex = lastAdIndex - adPerPage;\n  // Page numbers for buttons\n  let pageNumbers = [];\n  const num = Math.ceil(props.ads.length / adPerPage);\n  for (let i = 1; i <= num; i++) {\n    pageNumbers.push(i);\n  }\n  // When page number button is clicked\n  const clickPageNumberButton = num => {\n    setPageNumber(num);\n  };\n  return props.loading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(Box, {\n    sx: boardStyle,\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: adAreaStyle,\n      children: props.ads.slice(firstAdIndex, lastAdIndex).map(ad => {\n        return ad.auctionEnded ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product__container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              ad: ad,\n              dashCard: false,\n              cardStyle: boardCardStyle\n            }, ad._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)\n        }, ad._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: paginationStyle,\n      children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n        variant: \"outlined\",\n        size: \"small\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          disabled: pageNumber === 1,\n          onClick: e => clickPageNumberButton(pageNumber - 1),\n          children: \"Prev\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), pageNumbers.map(num => {\n          return /*#__PURE__*/_jsxDEV(Button, {\n            disabled: pageNumber === num,\n            onClick: e => clickPageNumberButton(num),\n            children: num\n          }, num, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(Button, {\n          disabled: pageNumber === pageNumbers[pageNumbers.length - 1],\n          onClick: e => clickPageNumberButton(pageNumber + 1),\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(Board, \"7n3h/qkv+moCbBD54elf601HSdg=\");\n_c = Board;\nconst mapStateToProps = state => ({\n  ads: state.ad.ads,\n  loading: state.auth.loading,\n  isAuth: state.auth.isAuthenticated,\n  user: state.auth.user\n});\nexport default connect(mapStateToProps, {\n  loadAds,\n  adPostedByOther,\n  setAlert,\n  updateAdInList,\n  clearAlerts\n})(Board);\nvar _c;\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["React","useEffect","useState","connect","Navigate","openSocket","Button","Box","ButtonGroup","adAreaStyle","boardCardStyle","boardStyle","paginationStyle","loadAds","adPostedByOther","updateAdInList","setAlert","clearAlerts","Spinner","Card","jsxDEV","_jsxDEV","Board","props","_s","pageNumber","setPageNumber","adPerPage","passedUser","socket","process","env","REACT_APP_API_BASE_URL","on","data","console","log","user","ad","owner","toString","_id","res","emit","off","isAuth","to","fileName","_jsxFileName","lineNumber","columnNumber","lastAdIndex","firstAdIndex","pageNumbers","num","Math","ceil","ads","length","i","push","clickPageNumberButton","loading","sx","children","slice","map","auctionEnded","className","dashCard","cardStyle","variant","size","disabled","onClick","e","_c","mapStateToProps","state","auth","isAuthenticated","$RefreshReg$"],"sources":["/Users/asantamariammathew/Desktop/online-auction-system-frontend-main/src/components/Board.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Navigate } from 'react-router-dom';\nimport openSocket from 'socket.io-client';\n// MUI\nimport { Button, Box, ButtonGroup } from '@mui/material';\n// Styling\nimport './css/board.css';\nimport './css/card.css';\n\nimport {\n  adAreaStyle,\n  boardCardStyle,\n  boardStyle,\n  paginationStyle,\n} from './css/boardStyle';\n// Actions\nimport { loadAds, adPostedByOther, updateAdInList } from '../actions/ad';\nimport { setAlert, clearAlerts } from '../actions/alert';\n// Components\nimport Spinner from './Spinner';\nimport Card from './Card';\n\nconst Board = (props) => {\n  const [pageNumber, setPageNumber] = useState(1);\n  const [adPerPage] = useState(6);\n\n  useEffect(() => {\n    if (props.passedUser) {\n      props.loadAds(props.passedUser);\n    } else {\n      props.loadAds();\n      const socket = openSocket(process.env.REACT_APP_API_BASE_URL);\n      // when new ad is added\n      socket.on('addAd', (data) => {\n        console.log(data);\n        if (\n          props.user &&\n          data.ad.owner &&\n          data.ad.owner.toString() !== props.user._id.toString()\n        ) {\n          props.clearAlerts();\n          props.setAlert('New ads available', 'info', 60000);\n        }\n      });\n      // when auction starts/ends\n      socket.on('auctionStarted', (res) => {\n        props.updateAdInList(res.data);\n      });\n      socket.on('auctionEnded', (res) => {\n        props.updateAdInList(res.data);\n      });\n\n      // disconnect socket when page left\n      return () => {\n        socket.emit('leaveHome');\n        socket.off();\n        props.clearAlerts();\n      };\n    }\n  }, []);\n\n  // Check if user is logged\n  if (!props.isAuth) {\n    return <Navigate to='/login' />;\n  }\n\n  // Pagination\n  let lastAdIndex = pageNumber * adPerPage;\n  let firstAdIndex = lastAdIndex - adPerPage;\n  // Page numbers for buttons\n  let pageNumbers = [];\n  const num = Math.ceil(props.ads.length / adPerPage);\n  for (let i = 1; i <= num; i++) {\n    pageNumbers.push(i);\n  }\n  // When page number button is clicked\n  const clickPageNumberButton = (num) => {\n    setPageNumber(num);\n  };\n\n  return props.loading ? (\n    <Spinner />\n  ) : (\n    <Box sx={boardStyle}>\n      <Box sx={adAreaStyle}>\n        {props.ads.slice(firstAdIndex, lastAdIndex).map((ad) => {\n          return ad.auctionEnded ? null : (\n            <div className='product__container' key={ad._id}>\n              <div className='card'>\n              <Card ad={ad} key={ad._id} dashCard={false} cardStyle={boardCardStyle} />\n              </div>\n            </div>\n          );\n        })}\n      </Box>\n      <Box sx={paginationStyle}>\n        <ButtonGroup variant='outlined' size='small'>\n          <Button\n            disabled={pageNumber === 1}\n            onClick={(e) => clickPageNumberButton(pageNumber - 1)}\n          >\n            Prev\n          </Button>\n          {pageNumbers.map((num) => {\n            return (\n              <Button\n                key={num}\n                disabled={pageNumber === num}\n                onClick={(e) => clickPageNumberButton(num)}\n              >\n                {num}\n              </Button>\n            );\n          })}\n          <Button\n            disabled={pageNumber === pageNumbers[pageNumbers.length - 1]}\n            onClick={(e) => clickPageNumberButton(pageNumber + 1)}\n          >\n            Next\n          </Button>\n        </ButtonGroup>\n      </Box>\n    </Box>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  ads: state.ad.ads,\n  loading: state.auth.loading,\n  isAuth: state.auth.isAuthenticated,\n  user: state.auth.user,\n});\n\nexport default connect(mapStateToProps, {\n  loadAds,\n  adPostedByOther,\n  setAlert,\n  updateAdInList,\n  clearAlerts,\n})(Board);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}